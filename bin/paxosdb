#!/bin/bash -e

if [ ! -z $3 ]; then
    cat - | gzip - | curl -k --compressed                                    \
        https:/$SERVER/put/db/$DB/secret/$SECRET/key/$1/version/$2/retain/$3 \
        -H 'Content-Type: application/json' -H 'Content-Encoding: gzip'      \
        --data-binary @-
elif [ ! -z $2 ]; then
    curl -k --compressed https:/$SERVER/get/db/$DB/key/$1/version/$2
elif [ ! -z $1 ]; then
    curl -k --compressed https:/$SERVER/get/db/$DB/key/$1
else
    curl -k --compressed https:/$SERVER/get/db/$DB
fi
